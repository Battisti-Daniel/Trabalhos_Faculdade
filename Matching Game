// ConsoleApplication1.cpp : Este arquivo contém a função 'main'. A execução do programa começa e termina ali.
//

#include <iostream>
#include<stdio.h>

using namespace std;

int main()
{
    int choicematrix, line, column,line1,column1, value = 0,value1 = 0,chance = 0,right = 0;
    int matrixgab[4][4];
    char matrixgame[4][4];
    srand(time(NULL));
    //main matrix

    int mainmatrix[4][4] =
    {
        1,4,5,2,
        7,2,8,7,
        3,6,1,4,
        6,5,3,8
    };

    //random choice
    choicematrix = rand() % 3;
    
    if (choicematrix == 0) //normal matrix
    {
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                matrixgab[i][j] = mainmatrix[i][j];
            }
        }
    }
    else if (choicematrix == 1) // transposed
    {
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                matrixgab[i][j] = mainmatrix[j][i];
            }
        }
    }
    else if (choicematrix == 2) // reverseline
    {
        int c = 0;
        for (int i = 3; i > -1; i--)
        {
            for (int j = 0; j < 4; j++)
            {
                matrixgab[i][j] = mainmatrix[c][j];
            }
            c += 1;
        }
    }
    else if (choicematrix == 3) //reversecolumn
    {
        int c = 0;
        for (int i = 0; i < 4; i++)
        {
            for (int j = 3; j > -1; j--)
            {
                matrixgab[i][j] = mainmatrix[i][c];
                c += 1;
            }
            c = 0;
        }
    }

    //matrixgame
    for (int i = 0; i < 4; i++) 
    {
        for (int j = 0; j < 4; j++) 
        {
            matrixgame[i][j] = '-';
        }
    }

    while (true)
    {
        //rules to finish game
        if (right == 8) { system("cls"); cout << "VOCE VENCEU, PARABENS!"; return false; }
        if (chance > 24) { system("cls"); cout << "VOCE PERDEU,TENTE NOVAMENTE!"; return false; }

        //show
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                cout << matrixgame[i][j] << "\t";
            }
            cout << "\n";
        }
        cout << "TOTAL DE JOGADAS:" << chance;

        //choice line and column
        cout << "\nInforme a seguir a posicao da linha: ";
        cin >> line;
        cout << "Informe a seguir a posicao da coluna: ";
        cin >> column;

        //rules
        if (line > 4 or line < 0 or column > 4 or column < 0 or matrixgame[line][column] != 45)
        {
            cout << ("Valor de linha ou coluna invalido, tente novamente! \n");
            system("pause");
            chance += 1;
            line = -1;
            column = -1;
            line1 = -1;
            column1 = -1;
            value = -1;
            value1 = -1;
            continue;
        }

        //ASCII
        if (matrixgab[line][column] == 1) { value = 49; }
        else if (matrixgab[line][column] == 2) { value = 50; }
        else if (matrixgab[line][column] == 3) { value = 51; }
        else if (matrixgab[line][column] == 4) { value = 52; }
        else if (matrixgab[line][column] == 5) { value = 53; }
        else if (matrixgab[line][column] == 6) { value = 54; }
        else if (matrixgab[line][column] == 7) { value = 55; }
        else if (matrixgab[line][column] == 8) { value = 56; }

        matrixgame[line][column] = value;

        //show
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                cout << matrixgame[i][j] << "\t";
            }
            cout << "\n";
        }

        //choice line and column
        cout << "\nInforme a seguir a posicao da linha: ";
        cin >> line1;
        cout << "Informe a seguir a posicao da coluna: ";
        cin >> column1;

        //rules

        if (line1 > 4 or line1 < 0 or column1 > 4 or column1 < 0 or matrixgame[line1][column1] != 45)
        {
            cout << ("Valor de linha ou coluna invalido, tente novamente! \n");
            system("pause");
            matrixgame[line][column] = 45;
            chance += 1;
            chance += 1;
            line = -1;
            column = -1;
            line1 = -1;
            column1 = -1;
            value = -1;
            value1 = -1;
            continue;
        }

        //ASCII
        if (matrixgab[line1][column1] == 1) { value1 = 49; }
        else if (matrixgab[line1][column1] == 2) { value1 = 50; }
        else if (matrixgab[line1][column1] == 3) { value1 = 51; }
        else if (matrixgab[line1][column1] == 4) { value1 = 52; }
        else if (matrixgab[line1][column1] == 5) { value1 = 53; }
        else if (matrixgab[line1][column1] == 6) { value1 = 54; }
        else if (matrixgab[line1][column1] == 7) { value1 = 55; }
        else if (matrixgab[line1][column1] == 8) { value1 = 56; }

        matrixgame[line1][column1] = value1;

        //show
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                cout << matrixgame[i][j] << "\t";
            }
            cout << "\n";
        }

        //show values
        if (value != value1) 
        {
            matrixgame[line][column] = 45;
            matrixgame[line1][column1] = 45;
            chance += 1;
        }
        else { right += 1; chance += 1; }
        
        system("pause");
    }
}
   
    
