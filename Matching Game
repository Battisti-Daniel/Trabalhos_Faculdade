//Trabalho desenvolvido por Daniel Battisti e João Pedro Voltolini De Melo
#include <iostream>
#include<stdio.h>
#include<sstream>

using namespace std;

int main()
{
    int mainmatrix[4][4], usematrix[4][4], choice, valuecol,valuelin,vectorcomp[4],countvector = 0,plays = 0,right = 0;
    string showmatrix[4][4];

    cout<< "Selecione alguma opção a seguir"<<"\n";
    cout<< "1 - Créditos"<< "\n";
    cout<< "2 - Novo Jogo"<<"\n";
    cout<<"Opção:";
    cin >> choice;
    
    //choice option
    while(choice < 1 or choice > 2)
    {
        system("clear");
        cout<< "Por favor selecionar uma opção válida"<<"\n";
        cout<< "Selecione alguma opção a seguir"<<"\n";
        cout<< "1 - Créditos"<< "\n";
        cout<< "2 - Novo Jogo"<<"\n";
        cout<<"Opção:";
        cin >> choice;
    }
    
    //select option 1
    if (choice == 1)
    {
        system("clear");
        cout<< "Trabalho desenvolvido por Daniel Battisti e João Pedro Voltolini De Melo";
    }
    if (choice == 2)
    {
    //default matrix
    for (int i = 0 ; i < 4 ; i ++)
    {
        for (int j = 0; j < 4 ; j ++)
        {
            mainmatrix[i][j] = rand()%10;
        }
    }
    
    //transposed matrix
    for (int i = 0 ; i < 4 ; i ++)
    {
        for(int j = 0 ; j < 4 ; j ++)
        {
            usematrix[i][j] = mainmatrix[j][i];
        }
    }
    
    //filled - in matrix show
    for (int i = 0 ; i < 4 ; i ++)
    {
        for(int j = 0 ; j < 4 ; j ++)
        {
            showmatrix[i][j] = "-";
        }
    }
        /*
    //show
        for (int i = 0 ; i < 4 ; i ++)
    {
        for(int j = 0 ; j < 4 ; j ++)
        {
            cout<< mainmatrix[i][j] << "\t";
        }
        cout<< "\n";
    }*/
        while (true){
        system("clear");
        
        //show
        for (int i = 0 ; i < 4 ; i ++)
    {
        for(int j = 0 ; j < 4 ; j ++)
        {
            cout<< showmatrix[i][j] << "\t";
        }
        cout<< "\n";
    }
        
        while(true)
        {
        for (int i = 0 ; i < 2 ; i ++)
        {
        cout<< "Informe a LINHA e a COLUNA que deseja virar" << "\n";
        cin >> valuelin;
        cout<< "(" << valuelin << ")"<< "\n";
        cin >> valuecol;
        cout<< "(" << valuelin << ")" << "(" << valuecol << ")"<< "\n";
        
        if(valuelin < 0 or valuelin > 3 or valuecol < 0 or valuecol > 3 )
        {
            cout<< "Por favor, inserir um valor válido!"<< "\n";
            continue;
        }
        
        if(vectorcomp[0] == vectorcomp[2] and vectorcomp[1] == vectorcomp[3])
        {
            cout<<"Nao e possivel fazer jogadas com os mesmos numeros, pedeu uma jogada1"<<"\n";
            plays +=1;
            continue;
        }
        
        
        //show matrix with numbers
        for (int i = 0 ; i < 4 ; i ++)
    {
        for(int j = 0 ; j < 4 ; j ++)
        {
            if(i==valuelin and j ==valuecol)
            {
                int valueshow = usematrix[i][j];
                vectorcomp[countvector] = i;
                countvector += 1;
                vectorcomp[countvector] = j;
                countvector +=1;
                string str = to_string(valueshow);
                showmatrix[i][j] = str;
            }
            cout<< showmatrix[i][j] << "\t";
        }
        cout<< "\n";
    }
        }
        
            for(int i = 0; i < 4; i ++)
        {
            for(int j = 0; j < 4; j ++)
            {
                if (showmatrix[i][j] != "-" and usematrix[i][j] == vectorcomp[0] and usematrix[i][j] == vectorcomp[1])
                {
                    cout<< "Nao e possivel selecionar uma posicao ja descoberta!, perdeu uma jogada2"<<"\n";
                    plays +=1;
                    continue;
                }
            }
        }
        
    //end choice col and line
    
    plays +=1;
    
    if (usematrix[vectorcomp[0]][vectorcomp[1]] == usematrix[vectorcomp[2]][vectorcomp[3]])
    {
        right +=1;
    }
    else
    {
        showmatrix[vectorcomp[0]][vectorcomp[1]] = "-";
        showmatrix[vectorcomp[2]][vectorcomp[3]] = "-";
    }
    countvector = 0;
    
    for(int i = 0; i < 4 ; i ++)
    {
        vectorcomp[i] = -1;
    }
    
    if(plays == 24)
    {
        cout<< "O numero de tentativas acabou, tente novamente!";
        return false;
    }
    else if (right == 8)
    {
        cout<< "Parabens voce venceu!"<< "\n";
        return false;
    }
     }
     
        }
    }

    return 0;
}
